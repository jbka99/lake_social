<div class="sidebar">
  <div class="sidebar__header d-flex align-items-center justify-content-between">
    <h3 class="sidebar__title">–°–æ–∑–¥–∞—Ç—å —Ç—Ä–µ–¥</h3>
  </div>

  <div class="sidebar__body">
    {% if current_user.is_authenticated|default(false) %}
      <form method="POST" action="{{ url_for('routes.thread_new') }}" enctype="multipart/form-data" class="d-grid gap-3" id="thread-create-form">
        <div>
          <label class="form-label text-secondary">–ó–∞–≥–æ–ª–æ–≤–æ–∫</label>
          <input type="text" name="title" class="form-control" placeholder="–û —á—ë–º —Ç—Ä–µ–¥?" required>
        </div>

        <div>
          <label class="form-label text-secondary">–¢–µ–∫—Å—Ç</label>
          <textarea name="content" class="form-control js-autogrow" placeholder="–í–∞—à–∏ –º—ã—Å–ª–∏..." rows="5" required></textarea>
        </div>

        <div>
          <label class="form-label text-secondary">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
          <div class="d-flex align-items-center gap-2 flex-wrap">
            <input
              type="file"
              name="image"
              accept="image/*"
              id="thread-image-input"
              class="d-none"
            >

            <label for="thread-image-input"
              class="btn btn-sm btn-outline-secondary attach-btn"
              id="thread-attach-btn"
              title="–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">
              üìé
            </label>

            <div class="image-preview-container mt-2 d-none" id="thread-image-preview">
              <span class="small text-secondary d-block mb-2" id="thread-file-name"></span>
              <img src="" alt="Preview" class="image-preview" 
              style="max-width: 100%; max-height: 200px; object-fit: contain;">
              <button type="button" 
                  class="btn btn-sm btn-outline-secondary mt-2 image-preview-remove">
                –£–±—Ä–∞—Ç—å
              </button>
            </div>
          </div>
        </div>

        <button type="submit" class="btn btn-success">
          –°–æ–∑–¥–∞—Ç—å —Ç—Ä–µ–¥
        </button>
      </form>
    {% else %}
      <div class="sidebar__muted">
        –í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å —Ç—Ä–µ–¥.
      </div>
    {% endif %}
  </div>
</div>
